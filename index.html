<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alimenti e Temperature</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <header>
    <h1>Registro Alimenti e Temperature</h1>
    <nav>
      <button id="btnAlimenti">Alimenti</button>
      <button id="btnTemperature">Temperature</button>
    </nav>
  </header>

  <section id="alimentiSection">
    <h2>Alimenti</h2>
    <form id="foodForm">
      <input type="date" id="foodData" required>
      <input type="text" id="foodNome" placeholder="Nome" required>
      <input type="number" id="foodQuantita" placeholder="Quantità" required>
      <input type="text" id="foodProcesso" placeholder="Processo" required>
      <input type="date" id="foodScadenza" required>
      <button type="submit">Aggiungi</button>
      <button type="button" id="btnCancelEditFood" style="display:none">Annulla</button>
    </form>
    <table id="foodTable">
      <thead>
        <tr>
          <th>Data</th><th>Nome</th><th>Quantità</th><th>Processo</th><th>Scadenza</th><th>Azioni</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="temperatureSection" style="display:none">
    <div class="tabs">
      <button onclick="toggleTempTab('sala')">Sala</button>
      <button onclick="toggleTempTab('cucina')">Cucina</button>
    </div>

    <div id="salaTab">
      <h2>Temperature Sala</h2>
      <input type="number" id="salaMese" placeholder="Mese" min="1" max="12">
      <input type="number" id="salaAnno" placeholder="Anno">
      <button onclick="loadTemperatureTable('sala', salaMese.value, salaAnno.value, true)">Carica</button>
      <button onclick="saveTemperatureTable('sala', salaMese.value, salaAnno.value, true)">Salva</button>
      <button id="btnExportSala">Esporta PDF</button>
      <table id="salaTable">
        <thead>
          <tr>
            <th>Giorno</th><th>Ora</th><th>Operatore</th>
            <th>Banco</th><th>Bindi</th><th>Vetrinetta</th><th>Levissima</th><th>Cantina Vini</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="cucinaTab" style="display:none">
      <h2>Temperature Cucina</h2>
      <input type="number" id="cucinaMese" placeholder="Mese" min="1" max="12">
      <input type="number" id="cucinaAnno" placeholder="Anno">
      <button onclick="loadTemperatureTable('cucina', cucinaMese.value, cucinaAnno.value, false)">Carica</button>
      <button onclick="saveTemperatureTable('cucina', cucinaMese.value, cucinaAnno.value, false)">Salva</button>
      <button id="btnExportCucina">Esporta PDF</button>
      <table id="cucinaTable">
        <thead>
          <tr>
            <th>Giorno</th><th>Ora</th><th>Operatore</th>
            <th>Cucina</th><th>Cucina 2</th><th>Pizzeria</th><th>Tavolo R1</th><th>Tavolo R2</th><th>Cella +</th><th>Cella -</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <script>
    const btnAlimenti = document.getElementById('btnAlimenti');
    const btnTemperature = document.getElementById('btnTemperature');
    const alimentiSection = document.getElementById('alimentiSection');
    const temperatureSection = document.getElementById('temperatureSection');
    const salaTab = document.getElementById('salaTab');
    const cucinaTab = document.getElementById('cucinaTab');

    btnAlimenti.onclick = () => {
      alimentiSection.style.display = 'block';
      temperatureSection.style.display = 'none';
    };

    btnTemperature.onclick = () => {
      alimentiSection.style.display = 'none';
      temperatureSection.style.display = 'block';
    };

    function toggleTempTab(tab) {
      if(tab === 'sala') {
        salaTab.style.display = 'block';
        cucinaTab.style.display = 'none';
      } else {
        salaTab.style.display = 'none';
        cucinaTab.style.display = 'block';
      }
    }
  </script>
</body>
</html>
